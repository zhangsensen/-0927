# 增强因子筛选配置 - 针对15个多样化因子
# 降低筛选标准，增加因子多样性

analysis:
  correlation_method: spearman
  correlation_min_periods: 30
  epsilon_small: 1.0e-08
  ic_periods:
  - 1
  - 5
  - 10
  - 20
  min_ic_observations: 20
  min_observations: 30
  min_ranking_samples: 5
  stability_split_ratio: 0.5

data_source:
  file_pattern: '*.parquet'
  panel_file: /Users/zhangshenshen/深度量化0927/etf_rotation_system/data/results/enhanced_panels/enhanced_panel_20251024_214306/enhanced_panel.parquet
  price_columns:
  - trade_date
  - close
  price_dir: raw/ETF/daily
  symbol_extract_method: stem_split

debug_mode: false

output:
  encoding: utf-8
  files:
    ic_analysis: enhanced_ic_analysis.csv
    passed_factors: enhanced_passed_factors.csv
    screening_report: enhanced_screening_report.txt
  include_factor_details: true
  include_summary_statistics: true
  output_dir: etf_rotation_system/data/results/enhanced_screening
  subdir_prefix: enhanced_screening_
  timestamp_format: '%Y%m%d_%H%M%S'
  use_timestamp_subdir: true

progress_reporting: true

screening:
  fdr_alpha: 0.15  # 放宽FDR控制
  force_include_factors: []  # 不强制包含任何因子
  ic_period_for_screening: ic_5d
  max_correlation: 0.8  # 放宽相关性约束
  max_factors: 15  # 目标15个因子
  max_pvalue: 0.1  # 放宽p值阈值
  min_coverage: 0.7  # 降低覆盖率要求
  min_ic: 0.005  # 降低IC阈值到0.5%
  min_ir: 0.05  # 降低IR阈值
  priority_metric: ic_ir
  target_rebalance_period: 5
  tier_labels:
    core: 🟢 核心
    research: 🔵 研究
    supplement: 🟡 补充
  tier_thresholds:
    core:
      ic: 0.015  # 降低核心因子要求
      ir: 0.1
    research:
      ic: 0.005
      ir: 0.05
    supplement:
      ic: 0.003
      ir: 0.03
  use_fdr: true
  use_period_specific_ic: true

# 增强因子权重配置
factor_weights:
  momentum:
    momentum_20d: 0.08
    momentum_60d_accel: 0.07
    momentum_relative_strength: 0.07
    momentum_trend_consistency: 0.06
  technical:
    rsi_14_relative: 0.08
    macd_momentum: 0.07
    bollinger_position: 0.07
    williams_r_14: 0.06
  volatility:
    volatility_regime: 0.07
    downside_risk: 0.06
    range_volatility: 0.06
  price_position:
    price_position_60d: 0.07
    distance_to_high: 0.06
  volume_price:
    volume_price_trend: 0.06
    money_flow_intensity: 0.06

# 市场制度识别配置
regime_detection:
  enabled: true
  lookback_period: 60
  volatility_threshold: 0.02
  trend_threshold: 0.01
  regime_adjustment_factor: 0.2