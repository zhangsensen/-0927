# ETF横截面因子筛选配置文件示例
# Linus工程风格: 简单、实用、无冗余

# === 数据源配置 ===
data_source:
  price_dir: "/Users/zhangshenshen/深度量化0927/raw/ETF/daily"                              # 价格数据目录
  panel_file: "/Users/zhangshenshen/深度量化0927/etf_rotation_system/data/results/panels/panel_20251020_162504/panel.parquet"  # 因子面板文件
  price_columns: ["trade_date", "close"]                  # 读取的列名
  file_pattern: "*.parquet"                               # 文件匹配模式
  symbol_extract_method: "stem_split"                     # symbol提取方法

# === 分析参数配置 ===
analysis:
  ic_periods: [1, 5, 10, 20]                            # IC分析周期
  min_observations: 30                                   # 最小观测值数量
  min_ranking_samples: 5                                 # 横截面排名最小样本
  min_ic_observations: 20                                # IC计算最小观测值
  correlation_method: "spearman"                         # 相关性计算方法
  correlation_min_periods: 30                            # 相关性计算最小周期
  epsilon_small: 1e-8                                    # 小值防止除零
  stability_split_ratio: 0.5                             # 稳定性分析分割比例

# === 筛选标准配置 ===
screening:
  # 基础筛选标准
  min_ic: 0.005                                          # 最小IC阈值 (0.5%)
  min_ir: 0.05                                           # 最小IR阈值
  max_pvalue: 0.2                                       # 最大p值
  min_coverage: 0.7                                      # 最小覆盖率
  max_correlation: 0.7                                   # 最大因子间相关性

  # FDR校正
  use_fdr: true                                          # 是否启用FDR校正
  fdr_alpha: 0.2                                         # FDR显著性水平

  # 分层评级阈值
  tier_thresholds:
    core:                                                 # 🟢 核心因子
      ic: 0.02
      ir: 0.1
    supplement:                                          # 🟡 补充因子
      ic: 0.01
      ir: 0.07
    research:                                            # 🔵 研究因子
      ic: 0.0
      ir: 0.0

  # 分层评级标签
  tier_labels:
    core: "🟢 核心"
    supplement: "🟡 补充"
    research: "🔵 研究"

# === 输出配置 ===
output:
  output_dir: "/Users/zhangshenshen/深度量化0927/etf_rotation_system/data/results/screening"  # 输出目录
  use_timestamp_subdir: true                            # 使用时间戳子目录
  timestamp_format: "%Y%m%d_%H%M%S"                     # 时间戳格式
  subdir_prefix: "screening_"                           # 子目录前缀

  # 输出文件名
  files:
    ic_analysis: "ic_analysis.csv"                      # IC分析结果
    passed_factors: "passed_factors.csv"                # 通过筛选的因子
    screening_report: "screening_report.txt"            # 筛选报告

  # 报告格式选项
  include_factor_details: true                          # 包含因子详情
  include_summary_statistics: true                      # 包含汇总统计
  encoding: "utf-8"                                     # 文件编码

# === 系统级控制 ===
debug_mode: false                                       # 调试模式
progress_reporting: true                               # 进度报告