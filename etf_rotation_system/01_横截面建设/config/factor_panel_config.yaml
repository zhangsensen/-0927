# ETFå› å­é¢æ¿ç”Ÿæˆé…ç½®æ–‡ä»¶
# æ›¿ä»£ä»£ç ä¸­çš„æ‰€æœ‰ç¡¬ç¼–ç å€¼

# ========== äº¤æ˜“å‚æ•° ==========
trading:
  days_per_year: 252          # å¹´åŒ–äº¤æ˜“æ—¥æ•° (Line 126)
  epsilon_small: 1.0e-10      # å°æ•°å€¼é¿å…é™¤é›¶ (Line 144, 152, 158, 176, 212, 232)
  min_periods: 1              # æ»šåŠ¨çª—å£æœ€å°å€¼ (Line 126, 130, 141, 150, 157)

# ========== å› å­æ—¶é—´çª—å£ ==========
factor_windows:
  # åŠ¨é‡å› å­
  momentum:
    - 20   # çŸ­æœŸåŠ¨é‡
  # === ç®€åŒ–ç‰ˆçª—å£é…ç½® ===
  # åŠ¨é‡ï¼šåªä¿ç•™63Då’Œ252D
  momentum:
    - 63   # å­£åº¦åŠ¨é‡
    - 252  # å¹´åº¦åŠ¨é‡

  # æ³¢åŠ¨ç‡ï¼šåªä¿ç•™120D
  volatility:
    - 120  # é•¿æœŸæ³¢åŠ¨

  # å›æ’¤ï¼šåªä¿ç•™126D
  drawdown:
    - 126  # åŠå¹´å›æ’¤

  # RSIï¼šåªä¿ç•™14D
  rsi:
    - 14   # æ ‡å‡†RSI

  # ä»·æ ¼ä½ç½®ï¼šåªä¿ç•™60D
  price_position:
    - 60   # ä¸­æœŸä½ç½®

  # æˆäº¤é‡æ¯”ç‡ï¼šåªä¿ç•™20D
  volume_ratio:
    - 20   # ä¸­æœŸé‡æ¯”

  # æŠ€æœ¯æŒ‡æ ‡ç‰¹å®šçª—å£
  atr_period: 14              # ATRå‘¨æœŸ
  vpt_trend_window: 20        # é‡ä»·è¶‹åŠ¿çª—å£
  vol_volatility_window: 20   # æˆäº¤é‡æ³¢åŠ¨çª—å£
  amount_surge_short: 5       # æˆäº¤é¢çªå¢çŸ­æœŸçª—å£
  amount_surge_long: 20       # æˆäº¤é¢çªå¢é•¿æœŸçª—å£
  intraday_position_window: 5 # æ—¥å†…ä½ç½®å¹³æ»‘çª—å£
  
  # ä¿ç•™å› å­çª—å£
  amplitude_window: 20        # æŒ¯å¹…çª—å£
  up_down_days_window: 20     # æ¶¨è·Œå¤©æ•°çª—å£
  linear_slope_window: 20     # çº¿æ€§å›å½’çª—å£
  distance_to_high_window: 252 # æ–°é«˜è·ç¦»çª—å£ï¼ˆå¹´ï¼‰
  relative_strength_window: 20 # ç›¸å¯¹å¼ºåº¦çª—å£
  turnover_ma_window: 60      # æ¢æ‰‹ç‡å‡å€¼çª—å£
  drawdown_recovery_window: 120 # å›æ’¤æ¢å¤çª—å£
  
  # æŠ€æœ¯æŒ‡æ ‡çª—å£ï¼ˆç®€åŒ–ï¼‰
  macd_fast: 12               # MACDå¿«çº¿å‘¨æœŸ
  macd_slow: 26               # MACDæ…¢çº¿å‘¨æœŸ
  macd_signal: 9              # MACDä¿¡å·çº¿å‘¨æœŸ
  boll_window: 20             # å¸ƒæ—å¸¦å‘¨æœŸ
  boll_std: 2.0               # å¸ƒæ—å¸¦æ ‡å‡†å·®å€æ•°
  wr_window: 14               # å¨å»‰æŒ‡æ ‡å‘¨æœŸ
  
  # æ–°å¢5ä¸ªç®€å•å› å­çª—å£
  trend_consistency_window: 20      # è¶‹åŠ¿ä¸€è‡´æ€§çª—å£
  extreme_return_window: 60         # æç«¯æ”¶ç›Šç»Ÿè®¡çª—å£
  extreme_return_threshold: 2.0     # æç«¯æ”¶ç›Šé˜ˆå€¼ï¼ˆå‡ å€æ ‡å‡†å·®ï¼‰
  volume_price_corr_window: 20      # é‡ä»·ç›¸å…³æ€§çª—å£
  volatility_short_window: 20       # çŸ­æœŸæ³¢åŠ¨ç‡çª—å£
  volatility_long_window: 60        # é•¿æœŸæ³¢åŠ¨ç‡çª—å£

# ========== é˜ˆå€¼å‚æ•° ==========
thresholds:
  large_order_volume_ratio: 1.2  # å¤§å•æµå…¥æˆäº¤é‡æ¯”ç‡é˜ˆå€¼ (Line 255)
  doji_body_threshold: null      # åå­—æ˜Ÿèº«ä½“é˜ˆå€¼ (å½“å‰ä½¿ç”¨epsilon)
  hammer_lower_shadow_ratio: 2.0 # é”¤å­çº¿ä¸‹å½±çº¿å€æ•° (Line 192)
  hammer_upper_shadow_ratio: 1.0 # é”¤å­çº¿ä¸Šå½±çº¿å€æ•° (Line 192)

# ========== è·¯å¾„é…ç½® ==========
paths:
  data_dir: "/Users/zhangshenshen/æ·±åº¦é‡åŒ–0927/raw/ETF/daily"                           # æ•°æ®ç›®å½•
  output_dir: "/Users/zhangshenshen/æ·±åº¦é‡åŒ–0927/etf_rotation_system/data/results/panels" # è¾“å‡ºç›®å½•
  config_file: "config/etf_config.yaml"               # é»˜è®¤é…ç½®æ–‡ä»¶

# ========== å¹¶è¡Œå¤„ç†é…ç½® ==========
processing:
  max_workers: 4               # é»˜è®¤å¹¶è¡Œè¿›ç¨‹æ•° (Line 268, 407)
  continue_on_symbol_error: true # å•ä¸ªæ ‡çš„å¤±è´¥æ—¶ç»§ç»­å¤„ç†
  max_failure_rate: 0.1        # æœ€å¤§å¤±è´¥ç‡å®¹å¿

# ========== å› å­å¼€å…³ ==========
# ğŸ¯ æ··åˆç­–ç•¥å› å­ä½“ç³»: 25ä¸ªæ ¸å¿ƒå› å­ (åˆ é™¤16ä¸ªå†—ä½™)
# æˆ˜ç•¥å±‚(æœˆåº¦): ç”¨252D/120D/60Dé•¿å‘¨æœŸå› å­ (ICé«˜,æ¢æ‰‹ä½)
# æˆ˜æœ¯å±‚(å‘¨åº¦): ç”¨20D/14DçŸ­å‘¨æœŸå› å­ (çµæ•,é€‚é…é¢‘ç¹è°ƒä»“)
factor_enable:
  # === æˆ˜ç•¥å±‚å› å­ (é•¿å‘¨æœŸ,æœˆåº¦è°ƒä»“) ===
  momentum: true               # MOMENTUM_63D/252D (æˆ˜ç•¥åŠ¨é‡)
  distance_to_high: true       # DISTANCE_TO_52W_HIGH (é•¿æœŸè¶‹åŠ¿)
  price_position: true         # PRICE_POSITION_60D (ä¸­æœŸä½ç½®)
  volatility: true             # VOLATILITY_120D (é•¿æœŸé£é™©)
  drawdown: true               # DRAWDOWN_126D (è´¨é‡æ§åˆ¶)
  
  # === æˆ˜æœ¯å±‚å› å­ (çŸ­å‘¨æœŸ,å‘¨åº¦è°ƒä»“) ===
  momentum_acceleration: true  # MOM_ACCEL (åŠ¨é‡åŠ é€Ÿ,20D)
  williams_r: true             # WR_14 (è¶…ä¹°è¶…å–)
  rsi: true                    # RSI_14 (æŠ€æœ¯æŒ‡æ ‡)
  volatility_regime_shift: true  # æ³¢åŠ¨ç‡çªå˜ (20D/60D)
  vol_volatility_20: true      # VOL_VOLATILITY_20 (é‡èƒ½æ³¢åŠ¨)
  
  # === è¾…åŠ©å› å­ (é€šç”¨) ===
  drawdown_recovery_speed: true  # å›æ’¤æ¢å¤é€Ÿåº¦
  linear_slope: true           # LINEAR_SLOPE_20D
  relative_strength_vs_index: true  # RELATIVE_STRENGTH_20D
  up_down_days_ratio: true     # UP_DOWN_DAYS_RATIO
  atr: true                    # ATR_14
  amplitude: true              # AMPLITUDE_20D
  volume_ratio: true           # VOLUME_RATIO_20D
  volume_price_trend: true     # VOLUME_PRICE_TREND
  trend_consistency: true      # è¶‹åŠ¿ä¸€è‡´æ€§
  extreme_return_freq: true    # æç«¯æ”¶ç›Šé¢‘ç‡
  volume_price_divergence: true  # é‡ä»·èƒŒç¦»
  intraday_position: true      # æ—¥å†…ä½ç½®
  
  # âŒ Linusæ¸…ç†: åˆ é™¤16ä¸ªå†—ä½™/ä½æ•ˆå› å­ âŒ
  # zscoreé‡å¤(5ä¸ª) - ICå®Œå…¨ç›¸åŒ,çº¯æŠ€å€º
  # relative_momentum_20d_zscore: false  # åœ¨æ¨ªæˆªé¢ç”Ÿæˆ,è¿™é‡Œä¸æ§åˆ¶
  # relative_momentum_60d_zscore: false
  # cs_rank_change_5d_zscore: false
  # vol_adjusted_excess_zscore: false
  # rs_deviation_zscore: false
  
  # ä½æ•ˆåŠ¨é‡(5ä¸ª) - IC<0.01
  consecutive_up_days: false   # IC=0.003,å‡ ä¹æ— æ•ˆ
  # cs_rank_change_5d: false   # æ¨ªæˆªé¢å› å­
  # relative_momentum_60d: false
  # vol_adjusted_excess: false
  # rotation_score: false
  
  # ä½æ•ˆæŠ€æœ¯æŒ‡æ ‡(3ä¸ª) - IC<0.01æˆ–è´Ÿè´¡çŒ®
  macd: false                  # MACD_HIST IC=0.008,å¤ªå¼±
  bollinger_bands: false       # BOLL_WIDTH IC=-0.005,è´Ÿè´¡çŒ®
  amount_surge_5d: false       # IC=0.002,å‡ ä¹æ— æ•ˆ
  
  # ETFä¸é€‚ç”¨(3ä¸ª) - è´Ÿè´¡çŒ®
  overnight_return: false      # IC=-0.012,è´Ÿè´¡çŒ®
  turnover_ratio: false        # IC=-0.004,è´Ÿè´¡çŒ®
  
  # å…¶ä»–åˆ é™¤
  kdj: false
  bias: false
  doji_pattern: false
  bullish_engulfing: false
  hammer_pattern: false
  illiquidity: false
  price_impact: false
  large_order_signal: false
  intraday_range: false
  true_range: false
  vol_ma_ratio_5: false
  buy_pressure: false
  vwap_deviation: false
  price_volume_div: false
  amount_change_rate: false
  shadow_ratio: false
  relative_amplitude: false
  return_quality: false
  sharpe_ratio: false
  obv: false

# ========== æ•°æ®å¤„ç†é…ç½® ==========
data_processing:
  required_columns:
    - "date"
    - "open"
    - "high"
    - "low"
    - "close"
    - "volume"
    - "symbol"

  optional_columns:
    - "amount"  # èµ„é‡‘æµæ•°æ®

  volume_column_alias: "vol"  # æˆäº¤é‡åˆ—åˆ«å (Line 73-74)

  fallback_estimation: true   # å½“ç¼ºå°‘amountæ—¶ä½¿ç”¨ä¼°ç®— (Line 228)

# ========== è¾“å‡ºé…ç½® ==========
output:
  save_execution_log: true    # ä¿å­˜æ‰§è¡Œæ—¥å¿—
  save_metadata: true         # ä¿å­˜å…ƒæ•°æ®
  timestamp_subdirectory: true # ä½¿ç”¨æ—¶é—´æˆ³å­ç›®å½•

# ========== æ—¥å¿—é…ç½® ==========
logging:
  level: "INFO"               # æ—¥å¿—çº§åˆ«
  format: "%(asctime)s [%(levelname)s] %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"

# ========== å­—ç¬¦ä¸²å’Œæ˜¾ç¤ºé…ç½® ==========
display:
  log_separator_length: 80    # æ—¥å¿—åˆ†éš”ç¬¦é•¿åº¦ (Line 374, 376)
  progress_bar_desc: "è®¡ç®—å› å­" # è¿›åº¦æ¡æè¿° (Line 286)
  factor_list_start: 1       # å› å­åˆ—è¡¨èµ·å§‹ç¼–å· (Line 359)
  json_indent: 2             # JSONæ–‡ä»¶ç¼©è¿› (Line 337)
  coverage_format: ".2%"     # è¦†ç›–ç‡æ˜¾ç¤ºæ ¼å¼ (Line 345, 356)

# ========== è®¡ç®—å¸¸é‡ ==========
constants:
  rsi_multiplier: 100         # RSIè®¡ç®—ä¹˜æ•° (Line 145)
  concat_axis: 1             # DataFrameè¿æ¥è½´ (Line 170)
  astype_float: "float"      # ç±»å‹è½¬æ¢ (Line 186, 192, 255)
  shift_days: 1              # ä½ç§»å¤©æ•° (Line 163, 168, 169, 182, 183, 185, 186, 201, 202)
  concat_max_axis: 1         # max()è½´å‚æ•° (Line 170)
  sign_multiplier: 1         # np.signä¹˜æ•° (Line 242)