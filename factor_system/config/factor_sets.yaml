# 因子集配置文件
# 定义可复用的因子集合，支持组合和动态扩展
# 注意：只包含factor_engine中已注册的因子

factor_sets:
  # 基础技术指标集（当前已注册）
  tech_mini:
    - RSI
    - MACD
    - STOCH

  # MACD家族（已注册）
  macd_family:
    - MACD
    - MACD_SIGNAL
    - MACD_HIST

  # 核心资金流因子
  money_flow_core:
    - MainNetInflow_Rate
    - LargeOrder_Ratio
    - SuperLargeOrder_Ratio
    - MainFlow_Momentum
    - Institutional_Absorption
    - Flow_Tier_Ratio_Delta
    - Flow_Reversal_Ratio

  # 增强资金流因子
  money_flow_enhanced:
    - MoneyFlow_Consensus
    - MoneyFlow_Hierarchy
    - OrderConcentration
    - Flow_Price_Divergence

  # 完整资金流因子（核心+增强）
  money_flow_all:
    - set: money_flow_core
    - set: money_flow_enhanced

  # 日线研究默认集（组合）- 只使用已注册因子
  daily_default_research:
    - set: tech_mini
    - set: money_flow_core

  # 生产环境标准集 - 所有已注册因子
  production_standard:
    - set: macd_family
    - set: money_flow_all
    - RSI
    - STOCH

  # 快速回测集（轻量）
  backtest_fast:
    - RSI
    - MACD
    - MainNetInflow_Rate
    - LargeOrder_Ratio

  # 全部因子（动态扩展到所有已注册因子）
  all:
    - all_factors

  # 生产测试集 - 代表性因子子集（40个）
  production_test:
    # 技术指标 (15个)
    - RSI
    - RSI7
    - RSI14
    - RSI21
    - MACD
    - MACD_SIGNAL
    - MACD_HIST
    - STOCH
    - WILLR14
    - CCI14
    - ATR14
    - BB_20_2.0_Upper
    - BB_20_2.0_Lower
    - EMA12
    - EMA26

    # 成交量指标 (5个)
    - OBV
    - VWAP
    - VolumeRatio5
    - AD
    - MFI

    # 统计指标 (5个)
    - LinearRegression5
    - LinearRegression10
    - Correlation5
    - Beta5
    - Alpha5

    # 移动平均/重叠指标 (10个)
    - MA5
    - MA10
    - MA20
    - EMA20
    - WMA10
    - DEMA
    - TEMA
    - KAMA
    - SAR
    - MidPoint

    # 资金流因子 (核心+增强, 12个)
    - set: money_flow_all

# VectorBT技术指标集（154个指标）
  vbt_moving_averages:
    # 移动平均类 (33个)
    - MA3, MA5, MA8, MA10, MA12, MA15, MA20, MA25, MA30, MA40, MA50, MA60, MA80, MA100, MA120, MA150, MA200
    - EMA3, EMA5, EMA8, EMA12, EMA15, EMA20, EMA26, EMA30, EMA40, EMA50, EMA60
    - DEMA, TEMA, KAMA, WMA5, WMA10, WMA20, TRIMA

  vbt_momentum:
    # 动量指标类 (33个)
    - RSI, RSI3, RSI6, RSI9, RSI12, RSI14, RSI18, RSI21, RSI25, RSI30
    - MACD, MACD_SIGNAL, MACD_HIST
    - STOCH
    - WILLR, WILLR14
    - CCI, CCI14
    - Momentum1, Momentum3, Momentum5, Momentum8, Momentum10, Momentum12, Momentum15, Momentum20
    - Position5, Position8, Position10, Position12, Position15, Position20, Position25, Position30
    - Trend5, Trend8, Trend10, Trend12, Trend15, Trend20, Trend25

  vbt_volatility:
    # 波动率指标类 (10个)
    - ATR, ATR7, ATR10, ATR14, ATR20
    - MSTD5, MSTD10, MSTD15, MSTD20
    - FSTD5, FSTD10, FSTD15, FSTD20

  vbt_volume:
    # 成交量指标类 (25个)
    - OBV
    - OBV_SMA_5, OBV_SMA_10, OBV_SMA_15, OBV_SMA_20
    - VWAP5, VWAP10, VWAP15, VWAP20, VWAP25, VWAP30
    - Volume_Ratio10, Volume_Ratio15, Volume_Ratio20, Volume_Ratio25, Volume_Ratio30
    - Volume_Momentum10, Volume_Momentum15, Volume_Momentum20, Volume_Momentum25, Volume_Momentum30

  vbt_overlap:
    # 重叠指标类 (布林带等，15个)
    - BBANDS
    - BB_10_2.0_Upper, BB_10_2.0_Middle, BB_10_2.0_Lower, BB_10_2.0_Width
    - BB_15_2.0_Upper, BB_15_2.0_Middle, BB_15_2.0_Lower, BB_15_2.0_Width
    - BB_20_2.0_Upper, BB_20_2.0_Middle, BB_20_2.0_Lower, BB_20_2.0_Width
    - BOLB_20

  # 完整VectorBT指标集（154个）
  vbt_all:
    - set: vbt_moving_averages
    - set: vbt_momentum
    - set: vbt_volatility
    - set: vbt_volume
    - set: vbt_overlap

  # 核心技术指标集（精选20个最常用的）
  vbt_core:
    - RSI, RSI14
    - MACD, MACD_SIGNAL, MACD_HIST
    - STOCH
    - WILLR14
    - CCI14
    - ATR14
    - MA5, MA10, MA20
    - EMA12, EMA26
    - OBV
    - VWAP20
    - BB_20_2.0_Upper, BB_20_2.0_Lower

# 配置说明：
# 1. 使用 "- set: <name>" 引用其他因子集
# 2. 使用 "all_factors" 关键字动态扩展到所有已注册因子
# 3. 因子ID会自动去重
# 4. 解析顺序：递归展开 -> 去重 -> 排序
#
# ✅ 重大更新：完整集成VectorBT的154个技术指标！
# - VectorBT技术指标: 154个 (移动平均、动量、波动率、成交量、重叠指标)
# - 原有因子: 263个 (技术、成交量、统计、重叠、资金流)
# - 总计: 417个因子 (包含重复的，实际去重后约350个)
#
# 🔥 使用示例：
# python scripts/production_run.py --set vbt_core          # 20个核心技术指标
# python scripts/production_run.py --set vbt_moving_averages # 33个移动平均指标
# python scripts/production_run.py --set vbt_all            # 154个VectorBT指标
# python scripts/production_run.py --set all                # 所有350+个因子
