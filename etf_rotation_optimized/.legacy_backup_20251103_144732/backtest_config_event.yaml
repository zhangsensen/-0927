# 纯向量化回测配置（事件驱动A/B配置）

data_paths:
  factor_dir: ../results/factor_selection
  ohlcv_dir: ../results/cross_section
  output_dir: ./results

parallel_config:
  n_workers: 8
  chunk_size: 100
  log_level: INFO

factor_config:
  factors: []
  combination_sizes: [1, 2]
  max_combinations: 10000
  weight_grid:
    - [1.0]
    - [0.5, 0.5]
  max_correlation: 0.8
  selection_thresholds:
    min_abs_ic: 0.01
    min_ic_ir: 0.02
    min_positive_rate: 0.55
    min_significant_rate: 0.1
    min_observations: 80
    fdr_q: 0.1
    fallback_top_k: 20
    significance_threshold: 0.02

backtest_config:
  rebalance_mode: "event"   # 事件驱动：有信号就交易
  top_n_list: [6]            # 与生产保持一致（Top-6）
  rebalance_freq_list: [20]  # 将在装载时映射为[1]（按日评估）
  fees: 0.0005
  init_cash: 1000000
  allow_zero_position: false

# 事件驱动：开启信号质量评估
signal_quality:
  enabled: true
  strength_threshold: 0.3   # 放宽强度阈值（建议）
  stability_window: 3       # 缩短稳定性窗口
  stability_threshold: 4.0  # 稍宽容的波动阈值
  rank_buffer: 2

# 执行约束（更积极地建立暴露）
execution:
  min_holding_days: 2
  max_daily_turnover: 0.5
  fill_policy: "fill"

signal_config:
  method: "composite_score"
  standardization: "zscore"
  invert_factors: []

performance_metrics:
  - sharpe_ratio
  - annual_return
  - max_drawdown
  - calmar_ratio
  - win_rate
  - avg_turnover
  - total_trades

output_config:
  save_top_n: 100
  save_equity_curves: true
  save_trades: false
  format: "csv"
