# ============================================================================
# ETF轮动系统 - 离线先验加权配置
# ============================================================================
# 用途: 测试离线先验加权方案
# ============================================================================

run_id: "ETF_ROTATION_PRIOR_WEIGHTED"

# 继承默认配置
data:
  symbols:
    - "159801"
    - "159819"
    - "159859"
    - "159883"
    - "159915"
    - "159920"
    - "159928"
    - "159949"
    - "159992"
    - "159995"
    - "159998"
    - "510050"
    - "510300"
    - "510500"
    - "511010"
    - "511260"
    - "511380"
    - "512010"
    - "512100"
    - "512400"
    - "512480"
    - "512660"
    - "512690"
    - "512720"
    - "512800"
    - "512880"
    - "512980"
    - "513050"
    - "513100"
    - "513130"
    - "513500"
    - "515030"
    - "515180"
    - "515210"
    - "515650"
    - "515790"
    - "516090"
    - "516160"
    - "516520"
    - "518850"
    - "518880"
    - "588000"
    - "588200"
  start_date: "2020-01-01"
  end_date: "2025-10-14"

cross_section:
  winsorize_lower: 0.025
  winsorize_upper: 0.975
  bounded_factors:
    - "PRICE_POSITION_20D"
    - "PRICE_POSITION_120D"
    - "PV_CORR_20D"
    - "RSI_14"

factor_selection:
  constraints_file: "configs/FACTOR_SELECTION_CONSTRAINTS.yaml"
  min_ic: 0.02
  max_pvalue: 0.10
  min_ir: 0.05
  max_correlation: 0.8
  health_monitor:
    enabled: true
    lookback_recent: 252
    lookback_historical: 504
    health_threshold_dying: 0.7
    health_threshold_dead: 0.5
    min_healthy_factors: 3
    rebalance_frequency: "quarterly"

# ============================================================================
# WFO配置 - 离线先验加权
# ============================================================================
wfo:
  is_period: 252
  oos_period: 60
  step_size: 20
  
  # 离线先验加权
  factor_weighting: "prior_weighted"
  min_factor_ic: 0.012
  ic_floor: 0.0
  
  # 先验贡献数据路径
  prior_contributions_path: "configs/prior_contributions.yaml"
  
  # 权重约束
  max_single_weight: 0.3
  min_single_weight: 0.05

backtest:
  init_cash: 100000
  top_n: 5
  rebalance_freq: 5
  commission_rate: 0.0003
  stamp_tax_rate: 0.001
  slippage_bps: 5.0
  min_daily_volume: 10000000
  max_trade_ratio: 0.10
  signal_delay_days: 1
  max_position: 0.3
  stop_loss: -0.08

output_root: "results"

performance:
  n_jobs: 8
  use_cache: true
  cache_dir: "cache"
