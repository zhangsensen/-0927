# ============================================================================
# AB测试 - 仅改变因子数量
# ============================================================================
# 测试目标: 验证因子数量对性能的影响
# 控制变量: 采样数=500, 约束=0.9
# ============================================================================
run_id: "AB_TEST_FACTOR_COUNT"

# 数据配置 (与默认配置相同)
data:
  symbols:
    # 深圳ETF
    - "159801" - "159819" - "159859" - "159883" - "159915"
    - "159920" - "159928" - "159949" - "159992" - "159995"
    - "159998"
    # 上海ETF
    - "510050" - "510300" - "510500" - "511010" - "511260"
    - "511380" - "512010" - "512100" - "512400" - "512480"
    - "512660" - "512690" - "512720" - "512800" - "512880"
    - "512980" - "513050" - "513100" - "513130" - "513500"
    - "515030" - "515180" - "515210" - "515650" - "515790"
    - "516090" - "516160" - "516520" - "518850" - "518880"
    - "588000" - "588200"
  start_date: "2020-01-01"
  end_date: "2025-10-14"

# 横截面配置 (与默认配置相同)
cross_section:
  winsorize_lower: 0.025
  winsorize_upper: 0.975
  bounded_factors:
    - "PRICE_POSITION_20D"
    - "PRICE_POSITION_120D"
    - "PV_CORR_20D"
    - "RSI_14"

# 因子筛选配置 (与默认配置相同)
factor_selection:
  constraints_file: "configs/FACTOR_SELECTION_CONSTRAINTS.yaml"
  min_ic: 0.02
  max_pvalue: 0.10
  min_ir: 0.05
  max_correlation: 0.9  # 保持不变
  health_monitor:
    enabled: true
    lookback_recent: 252
    lookback_historical: 504
    health_threshold_dying: 0.7
    health_threshold_dead: 0.5
    min_healthy_factors: 3
    rebalance_frequency: "quarterly"

# WFO配置 - 仅改变因子数量
wfo:
  is_period: 252
  oos_period: 60
  step_size: 20

  # 测试变量: 因子数量
  combo_size: 8        # 改为8因子 (原为5)
  n_samples: 500       # 保持不变
  top_k: 10            # 保持不变

  # 权重方案 (保持不变)
  weighting_scheme: "gradient_decay"
  gradient_decay_rate: 0.5

# 回测配置 (与默认配置相同)
backtest:
  init_cash: 100000
  top_n: 5
  rebalance_freq: 5
  commission_rate: 0.0003
  stamp_tax_rate: 0.001
  slippage_bps: 5.0
  min_daily_volume: 10000000
  max_trade_ratio: 0.10
  signal_delay_days: 1
  max_position: 0.3
  stop_loss: -0.08

# 输出配置
output_root: "results"

# 性能配置 (与默认配置相同)
performance:
  n_jobs: 8
  use_cache: true
  cache_dir: "cache"

# 日志配置
logging:
  version: 1
  disable_existing_loggers: false
  formatters:
    standard:
      format: "%(asctime)s | %(levelname)-8s | %(message)s"
  handlers:
    console:
      class: logging.StreamHandler
      level: INFO
      formatter: standard
      stream: ext://sys.stdout
  root:
    level: INFO
    handlers: [console]