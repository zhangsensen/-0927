{
  "metadata": {
    "report_title": "ETFå› å­é¢æ¿é…ç½®æå–ç»¼åˆéªŒè¯æŠ¥å‘Š",
    "generation_time": "2025-10-20T14:00:46.330129",
    "validator": "Claude Code Quality Engineer",
    "scope": "é…ç½®ç³»ç»Ÿã€åŠŸèƒ½ç­‰ä»·æ€§ã€å‚æ•°æå–ã€æ€§èƒ½éªŒè¯"
  },
  "executive_summary": {
    "total_test_categories": 4,
    "total_tests_run": 20,
    "total_tests_passed": 17,
    "total_tests_failed": 3,
    "critical_failures": 3,
    "overall_success_rate": 0.85,
    "overall_status": "âŒ å¤±è´¥"
  },
  "report_summaries": {
    "config_validation": {
      "summary": {
        "total_tests": 9,
        "passed_tests": 8,
        "failed_tests": 1,
        "critical_failures": 1,
        "success_rate": 0.8888888888888888,
        "overall_success": false
      },
      "test_count": 9,
      "passed_count": 8,
      "failed_count": 1,
      "success_rate": 0.8888888888888888,
      "overall_success": false
    },
    "functional_equivalence": {
      "summary": {
        "total_tests": 6,
        "passed_tests": 4,
        "failed_tests": 2,
        "critical_failures": 2,
        "success_rate": 0.6666666666666666,
        "overall_success": false
      },
      "test_count": 6,
      "passed_count": 4,
      "failed_count": 2,
      "success_rate": 0.6666666666666666,
      "overall_success": false
    },
    "config_extraction": {
      "summary": {
        "total_validations": 4,
        "passed_validations": 3,
        "failed_validations": 1,
        "success_rate": 0.75,
        "overall_success": false
      },
      "test_count": 0,
      "passed_count": 0,
      "failed_count": 0,
      "success_rate": 0.75,
      "overall_success": false
    },
    "performance_comparison": {
      "summary": {
        "total_tests": 5,
        "passed_tests": 5,
        "failed_tests": 0,
        "success_rate": 1.0,
        "overall_success": true
      },
      "test_count": 5,
      "passed_count": 5,
      "failed_count": 0,
      "success_rate": 1.0,
      "overall_success": true
    }
  },
  "detailed_analysis": {
    "configuration_system": {
      "status": "âŒ éœ€ä¿®å¤",
      "success_rate": 0.8888888888888888,
      "key_findings": [
        "æµ‹è¯•æˆåŠŸç‡: 88.9%",
        "å…³é”®å¤±è´¥: 1 é¡¹",
        "å¤±è´¥é¡¹ç›®: é”™è¯¯å¤„ç†æœºåˆ¶"
      ]
    },
    "functional_equivalence": {
      "status": "âŒ éœ€ä¿®å¤",
      "success_rate": 0.6666666666666666,
      "key_findings": [
        "æµ‹è¯•æˆåŠŸç‡: 66.7%",
        "å…³é”®å¤±è´¥: 2 é¡¹",
        "å¤±è´¥é¡¹ç›®: åŸºç¡€å› å­è®¡ç®—åŠŸèƒ½, å‚æ•°æå–å®Œæ•´æ€§"
      ]
    },
    "parameter_extraction": {
      "status": "âš ï¸ éœ€æ”¹è¿›",
      "extraction_rate": 0.896551724137931,
      "key_findings": [
        "æµ‹è¯•æˆåŠŸç‡: 75.0%",
        "å…³é”®å¤±è´¥: 0 é¡¹"
      ]
    },
    "performance": {
      "status": "âœ… ä¼˜ç§€",
      "success_rate": 1.0,
      "key_findings": [
        "é…ç½®åŠ è½½æ—¶é—´: 2.67ms",
        "å†…å­˜ä½¿ç”¨: 0.00MB"
      ]
    }
  },
  "all_test_results": [
    {
      "test_name": "é…ç½®æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥",
      "success": true,
      "duration": 1.3113021850585938e-05,
      "details": {
        "success": true,
        "message": "é…ç½®æ–‡ä»¶å­˜åœ¨ä¸”éç©º",
        "file_size": 3998,
        "file_path": "etf_rotation_system/01_æ¨ªæˆªé¢å»ºè®¾/config/factor_panel_config.yaml"
      },
      "critical": true,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "YAMLè¯­æ³•éªŒè¯",
      "success": true,
      "duration": 0.002857208251953125,
      "details": {
        "success": true,
        "message": "YAMLè¯­æ³•æ­£ç¡®",
        "top_level_keys": [
          "trading",
          "factor_windows",
          "thresholds",
          "paths",
          "processing",
          "factor_enable",
          "data_processing",
          "output",
          "logging"
        ],
        "config_type": "dict"
      },
      "critical": true,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "é…ç½®ç±»å¯¼å…¥æµ‹è¯•",
      "success": true,
      "duration": 3.0994415283203125e-06,
      "details": {
        "success": true,
        "message": "å¯ç”¨ç±»: 5, ç¼ºå¤±ç±»: 0",
        "available_classes": [
          "FactorPanelConfig",
          "TradingConfig",
          "FactorWindowsConfig",
          "ThresholdsConfig",
          "ProcessingConfig"
        ],
        "missing_classes": []
      },
      "critical": true,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "é…ç½®åŠ è½½åŠŸèƒ½",
      "success": true,
      "duration": 0.0025022029876708984,
      "details": {
        "success": true,
        "message": "åŠ è½½æˆåŠŸï¼ŒéªŒè¯é€šè¿‡: True",
        "loaded_sections": [
          "trading",
          "factor_windows",
          "thresholds",
          "paths",
          "processing",
          "factor_enable",
          "data_processing",
          "output",
          "logging"
        ],
        "missing_sections": [],
        "validation_passed": true
      },
      "critical": true,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "å‚æ•°éªŒè¯æµ‹è¯•",
      "success": true,
      "duration": 3.504753112792969e-05,
      "details": {
        "success": true,
        "message": "å‚æ•°éªŒè¯æµ‹è¯•: 5/5 é€šè¿‡",
        "test_results": [
          {
            "test_name": "æ­£å¸¸é…ç½®",
            "passed": true,
            "expected": true,
            "actual": true,
            "correct": true
          },
          {
            "test_name": "è´Ÿæ•°äº¤æ˜“æ—¥",
            "passed": true,
            "expected": false,
            "actual": false,
            "error": "days_per_year must be positive",
            "correct": true
          },
          {
            "test_name": "é›¶å€¼epsilon",
            "passed": true,
            "expected": false,
            "actual": false,
            "error": "epsilon_small must be positive",
            "correct": true
          },
          {
            "test_name": "è´Ÿæ•°çª—å£",
            "passed": true,
            "expected": false,
            "actual": false,
            "error": "Window size must be positive: -20",
            "correct": true
          },
          {
            "test_name": "æ— æ•ˆæ—¥å¿—çº§åˆ«",
            "passed": true,
            "expected": false,
            "actual": false,
            "error": "Invalid log level: INVALID",
            "correct": true
          }
        ],
        "pass_rate": 1.0
      },
      "critical": true,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "é»˜è®¤å€¼æ£€æŸ¥",
      "success": true,
      "duration": 1.4066696166992188e-05,
      "details": {
        "success": true,
        "message": "é»˜è®¤å€¼æ£€æŸ¥: 7/7 æ­£ç¡®",
        "default_checks": [
          {
            "key_path": "trading.days_per_year",
            "expected": 252,
            "actual": 252,
            "correct": true
          },
          {
            "key_path": "trading.epsilon_small",
            "expected": 1e-10,
            "actual": 1e-10,
            "correct": true
          },
          {
            "key_path": "trading.min_periods",
            "expected": 1,
            "actual": 1,
            "correct": true
          },
          {
            "key_path": "factor_windows.momentum",
            "expected": [
              20,
              63,
              126,
              252
            ],
            "actual": [
              20,
              63,
              126,
              252
            ],
            "correct": true
          },
          {
            "key_path": "factor_windows.atr_period",
            "expected": 14,
            "actual": 14,
            "correct": true
          },
          {
            "key_path": "processing.max_workers",
            "expected": 4,
            "actual": 4,
            "correct": true
          },
          {
            "key_path": "logging.level",
            "expected": "INFO",
            "actual": "INFO",
            "correct": true
          }
        ],
        "pass_rate": 1.0
      },
      "critical": false,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "é…ç½®ä¿®æ”¹å½±å“",
      "success": true,
      "duration": 0.0025081634521484375,
      "details": {
        "success": true,
        "message": "é…ç½®ä¿®æ”¹æµ‹è¯•: åŠ¨é‡çª—å£ä» [20, 63, 126, 252] æ”¹ä¸º [5, 10, 15]",
        "original_momentum": [
          20,
          63,
          126,
          252
        ],
        "modified_momentum": [
          5,
          10,
          15
        ],
        "expected_momentum": [
          5,
          10,
          15
        ],
        "change_detected": true,
        "value_correct": true
      },
      "critical": false,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "é”™è¯¯å¤„ç†æœºåˆ¶",
      "success": false,
      "duration": 5.1021575927734375e-05,
      "details": {
        "success": false,
        "message": "é”™è¯¯å¤„ç†æµ‹è¯•: 2/3 é€šè¿‡",
        "error_results": [
          {
            "test_name": "ä¸å­˜åœ¨çš„é…ç½®æ–‡ä»¶",
            "passed": true,
            "message": "æ­£ç¡®å¤„ç†é”™è¯¯æƒ…å†µ"
          },
          {
            "test_name": "æ— æ•ˆYAMLæ–‡ä»¶",
            "passed": false,
            "message": "åº”è¯¥æŠ›å‡ºå¼‚å¸¸ä½†æ²¡æœ‰"
          },
          {
            "test_name": "ç±»å‹é”™è¯¯é…ç½®",
            "passed": true,
            "message": "æ­£ç¡®æŠ›å‡ºå¼‚å¸¸: TypeError"
          }
        ],
        "pass_rate": 0.6666666666666666
      },
      "critical": true,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "å‘åå…¼å®¹æ€§",
      "success": true,
      "duration": 0.0024368762969970703,
      "details": {
        "success": true,
        "message": "å‘åå…¼å®¹æ€§æµ‹è¯•",
        "has_expected_keys": true,
        "has_factor_keys": true,
        "legacy_structure": {
          "factor_generation": {
            "momentum_periods": [
              20,
              63,
              126,
              252
            ],
            "volatility_windows": [
              20,
              60,
              120
            ],
            "rsi_windows": [
              6,
              14,
              24
            ],
            "price_position_windows": [
              20,
              60,
              120
            ],
            "volume_ratio_windows": [
              5,
              20,
              60
            ]
          }
        }
      },
      "critical": false,
      "error": null,
      "report_category": "config_validation"
    },
    {
      "test_name": "åŸºç¡€å› å­è®¡ç®—åŠŸèƒ½",
      "success": false,
      "duration": 0.010045051574707031,
      "details": {
        "success": false,
        "message": "åŸºç¡€å› å­è®¡ç®—æµ‹è¯•å¤±è´¥: name 'OutputConfig' is not defined",
        "error_type": "NameError"
      },
      "critical": true,
      "error": null,
      "report_category": "functional_equivalence"
    },
    {
      "test_name": "å‚æ•°æå–å®Œæ•´æ€§",
      "success": false,
      "duration": 0.0025429725646972656,
      "details": {
        "success": false,
        "message": "å‚æ•°æå–å®Œæ•´æ€§æµ‹è¯•å¤±è´¥: attribute name must be string, not 'int'",
        "error_type": "TypeError"
      },
      "critical": true,
      "error": null,
      "report_category": "functional_equivalence"
    },
    {
      "test_name": "é…ç½®å‚æ•°å½±å“",
      "success": true,
      "duration": 1.71661376953125e-05,
      "details": {
        "success": true,
        "message": "é…ç½®å‚æ•°å½±å“æµ‹è¯•: åŸºç¡€é…ç½® [20, 63, 126, 252] vs ä¿®æ”¹é…ç½® [5, 10, 15]",
        "base_momentum": [
          20,
          63,
          126,
          252
        ],
        "modified_momentum": [
          5,
          10,
          15
        ],
        "configs_different": true
      },
      "critical": false,
      "error": null,
      "report_category": "functional_equivalence"
    },
    {
      "test_name": "å› å­å¼€å…³åŠŸèƒ½",
      "success": true,
      "duration": 6.9141387939453125e-06,
      "details": {
        "success": true,
        "message": "å› å­å¼€å…³æµ‹è¯•: é»˜è®¤å¯ç”¨ 5 ä¸ªï¼Œä¿®æ”¹åå¯ç”¨ 3 ä¸ª",
        "default_enabled": 5,
        "modified_enabled": 3,
        "switches_working": true
      },
      "critical": false,
      "error": null,
      "report_category": "functional_equivalence"
    },
    {
      "test_name": "é”™è¯¯æ¢å¤èƒ½åŠ›",
      "success": true,
      "duration": 9.775161743164062e-06,
      "details": {
        "success": true,
        "message": "é”™è¯¯æ¢å¤æµ‹è¯•: 2/2 é€šè¿‡",
        "error_tests": [
          {
            "test": "æ— æ•ˆæ•°æ®ç›®å½•",
            "result": "handled",
            "success": true
          },
          {
            "test": "æ— æ•ˆå‚æ•°å€¼",
            "result": "correctly_rejected",
            "success": true
          }
        ],
        "robustness_rate": 1.0
      },
      "critical": true,
      "error": null,
      "report_category": "functional_equivalence"
    },
    {
      "test_name": "æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥",
      "success": true,
      "duration": 0.016922712326049805,
      "details": {
        "success": true,
        "message": "æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥: 3/3 æ–‡ä»¶è´¨é‡è‰¯å¥½",
        "consistency_checks": [
          {
            "file": "512100_daily_20240101_20240331.parquet",
            "missing_columns": [],
            "has_nan": false,
            "has_negative_price": false,
            "has_negative_volume": false,
            "data_quality": "good"
          },
          {
            "file": "159919_daily_20240101_20240331.parquet",
            "missing_columns": [],
            "has_nan": false,
            "has_negative_price": false,
            "has_negative_volume": false,
            "data_quality": "good"
          },
          {
            "file": "510300_daily_20240101_20240331.parquet",
            "missing_columns": [],
            "has_nan": false,
            "has_negative_price": false,
            "has_negative_volume": false,
            "data_quality": "good"
          }
        ],
        "data_quality_rate": 1.0
      },
      "critical": true,
      "error": null,
      "report_category": "functional_equivalence"
    },
    {
      "test_name": "é…ç½®åŠ è½½æ€§èƒ½",
      "success": true,
      "duration": 0.09171795845031738,
      "details": {
        "success": true,
        "message": "é…ç½®åŠ è½½æ€§èƒ½: å¹³å‡ 2.67ms, å†…å­˜ 0.01MB",
        "avg_load_time_ms": 2.6701927185058594,
        "avg_memory_usage_mb": 0.0078125,
        "load_times_ms": [
          2.869844436645508,
          2.727031707763672,
          2.621889114379883,
          2.608776092529297,
          2.6030540466308594,
          2.6979446411132812,
          2.685070037841797,
          2.6521682739257812,
          2.5680065155029297,
          2.668142318725586
        ],
        "memory_usage_mb": [
          0.078125,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ]
      },
      "error": null,
      "report_category": "performance_comparison"
    },
    {
      "test_name": "é…ç½®éªŒè¯æ€§èƒ½",
      "success": true,
      "duration": 0.024631977081298828,
      "details": {
        "success": true,
        "message": "é…ç½®éªŒè¯æ€§èƒ½: å¹³å‡ 0.00ms",
        "avg_validation_time_ms": 0.0031232833862304688,
        "validation_times_ms": [
          0.010013580322265625,
          0.00286102294921875,
          0.00286102294921875,
          0.00286102294921875,
          0.00286102294921875,
          0.0007152557373046875,
          0.0019073486328125,
          0.003814697265625,
          0.0021457672119140625,
          0.0011920928955078125
        ]
      },
      "error": null,
      "report_category": "performance_comparison"
    },
    {
      "test_name": "å‚æ•°ä¿®æ”¹æ€§èƒ½",
      "success": true,
      "duration": 8.106231689453125e-05,
      "details": {
        "success": true,
        "message": "å‚æ•°ä¿®æ”¹æ€§èƒ½: å¹³å‡ 0.00ms",
        "avg_modification_time_ms": 0.0007510185241699219,
        "modification_times_ms": [
          0.0019073486328125,
          0.0011920928955078125,
          0.00095367431640625,
          0.0011920928955078125,
          0.0,
          0.0011920928955078125,
          0.0011920928955078125,
          0.00095367431640625,
          0.0,
          0.0011920928955078125,
          0.0,
          0.0007152557373046875,
          0.0,
          0.0,
          0.0,
          0.0011920928955078125,
          0.0011920928955078125,
          0.0,
          0.0011920928955078125,
          0.00095367431640625
        ]
      },
      "error": null,
      "report_category": "performance_comparison"
    },
    {
      "test_name": "é…ç½®åºåˆ—åŒ–æ€§èƒ½",
      "success": true,
      "duration": 0.0010039806365966797,
      "details": {
        "success": true,
        "message": "åºåˆ—åŒ–æ€§èƒ½: åºåˆ—åŒ– 0.08ms, ååºåˆ—åŒ– 0.01ms",
        "avg_serialization_time_ms": 0.08461475372314453,
        "avg_deserialization_time_ms": 0.013780593872070312,
        "avg_serialized_size_bytes": 1829.0,
        "serialized_sizes": [
          1829,
          1829,
          1829,
          1829,
          1829,
          1829,
          1829,
          1829,
          1829,
          1829
        ]
      },
      "error": null,
      "report_category": "performance_comparison"
    },
    {
      "test_name": "å†…å­˜æ•ˆç‡æµ‹è¯•",
      "success": true,
      "duration": 0.04964137077331543,
      "details": {
        "success": true,
        "message": "å†…å­˜æ•ˆç‡: å¹³å‡æ¯ä¸ªé…ç½®å®ä¾‹ 0.00MB",
        "avg_memory_per_instance_mb": 0.0,
        "memory_usage_per_instance": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "instance_counts": [
          1,
          5,
          10,
          20,
          50
        ]
      },
      "error": null,
      "report_category": "performance_comparison"
    }
  ],
  "recommendations": [
    "ğŸš¨ å­˜åœ¨å…³é”®å¤±è´¥ï¼Œéœ€è¦ç«‹å³ä¿®å¤",
    "ğŸš¨ å­˜åœ¨å…³é”®åŠŸèƒ½é—®é¢˜",
    "   - ä¿®å¤: é”™è¯¯å¤„ç†æœºåˆ¶",
    "   - ä¿®å¤: åŸºç¡€å› å­è®¡ç®—åŠŸèƒ½",
    "   - ä¿®å¤: å‚æ•°æå–å®Œæ•´æ€§",
    "ğŸ”§ ä¿®å¤ ç¡¬ç¼–ç å€¼æå–å®Œæ•´æ€§: ç¡¬ç¼–ç å€¼æå–: 26/29 å·²æå–"
  ],
  "final_conclusion": {
    "overall_status": "éœ€ä¿®å¤",
    "confidence_level": "ä½",
    "main_message": "ETFå› å­é¢æ¿é…ç½®æå–å­˜åœ¨å…³é”®é—®é¢˜ï¼Œéœ€è¦ç«‹å³ä¿®å¤",
    "refactoring_quality": "éœ€æ”¹è¿›",
    "success_rate": 0.85,
    "critical_issues_resolved": false,
    "key_achievements": [
      "é…ç½®ç³»ç»Ÿéœ€è¦æ”¹è¿›",
      "å‚æ•°æå–éœ€è¦å®Œå–„",
      "æ€§èƒ½è¡¨ç°è‰¯å¥½"
    ],
    "areas_for_improvement": [
      null,
      "å®Œå–„å‚æ•°æå–è¦†ç›–",
      "å¢å¼ºé”™è¯¯å¤„ç†æœºåˆ¶"
    ]
  },
  "next_steps": [
    "1. ç«‹å³ä¿®å¤å…³é”®å¤±è´¥é¡¹",
    "2. é‡æ–°è¿›è¡Œå…¨é¢æµ‹è¯•",
    "3. è¿›è¡Œä»£ç å®¡æŸ¥å’Œè´¨é‡æ£€æŸ¥",
    "4. åˆ¶å®šè¯¦ç»†çš„é—®é¢˜ä¿®å¤è®¡åˆ’",
    "5. å»ºç«‹æ›´ä¸¥æ ¼çš„æµ‹è¯•æµç¨‹"
  ]
}