# ä¼˜åŒ–ç­›é€‰é…ç½® - åŸºäºç°æœ‰35ä¸ªä¼˜è´¨å› å­
# ç›®æ ‡ï¼šä»35ä¸ªå› å­ä¸­ç²¾é€‰15-20ä¸ªï¼Œè§£å†³è¿‡æ‹Ÿåˆé—®é¢˜

analysis:
  correlation_method: spearman
  correlation_min_periods: 30
  epsilon_small: 1.0e-08
  ic_periods:
  - 1
  - 5
  - 10
  - 20
  min_ic_observations: 20
  min_observations: 30
  min_ranking_samples: 5
  stability_split_ratio: 0.5

data_source:
  file_pattern: '*.parquet'
  panel_file: /Users/zhangshenshen/æ·±åº¦é‡åŒ–0927/etf_rotation_system/data/results/panels/panel_20251024_214306/panel.parquet
  price_columns:
  - trade_date
  - close
  price_dir: raw/ETF/daily
  symbol_extract_method: stem_split

debug_mode: false

output:
  encoding: utf-8
  files:
    ic_analysis: optimized_ic_analysis.csv
    passed_factors: optimized_passed_factors.csv
    screening_report: optimized_screening_report.txt
  include_factor_details: true
  include_summary_statistics: true
  output_dir: etf_rotation_system/data/results/optimized_screening
  subdir_prefix: optimized_screening_
  timestamp_format: '%Y%m%d_%H%M%S'
  use_timestamp_subdir: true

progress_reporting: true

screening:
  fdr_alpha: 0.2  # è¿›ä¸€æ­¥æ”¾å®½FDRæ§åˆ¶
  force_include_factors:
    - "RSI_14"  # å¼ºåˆ¶åŒ…å«æ ¸å¿ƒæŠ€æœ¯æŒ‡æ ‡
    - "WR_14"   # å¼ºåˆ¶åŒ…å«å¨å»‰æŒ‡æ ‡
    - "TREND_CONSISTENCY"  # å¼ºåˆ¶åŒ…å«è¶‹åŠ¿ä¸€è‡´æ€§
    - "CS_RANK_PERCENTILE"  # å¼ºåˆ¶åŒ…å«æ¨ªæˆªé¢æ’å
    - "ROTATION_SCORE"  # å¼ºåˆ¶åŒ…å«è½®åŠ¨åˆ†æ•°
  ic_period_for_screening: ic_5d
  max_correlation: 0.75  # é€‚åº¦æ§åˆ¶ç›¸å…³æ€§
  max_factors: 18  # ç›®æ ‡18ä¸ªå› å­
  max_pvalue: 0.15  # è¿›ä¸€æ­¥æ”¾å®½på€¼
  min_coverage: 0.65  # è¿›ä¸€æ­¥é™ä½è¦†ç›–ç‡è¦æ±‚
  min_ic: 0.003  # å¤§å¹…é™ä½ICé˜ˆå€¼åˆ°0.3%
  min_ir: 0.03  # å¤§å¹…é™ä½IRé˜ˆå€¼
  priority_metric: ic_ir
  target_rebalance_period: 5
  tier_labels:
    core: ğŸŸ¢ æ ¸å¿ƒ
    research: ğŸ”µ ç ”ç©¶
    supplement: ğŸŸ¡ è¡¥å……
  tier_thresholds:
    core:
      ic: 0.008  # é™ä½æ ¸å¿ƒå› å­è¦æ±‚
      ir: 0.06
    research:
      ic: 0.004
      ir: 0.04
    supplement:
      ic: 0.002
      ir: 0.02
  use_fdr: true
  use_period_specific_ic: true

# ä¼˜åŒ–å› å­æƒé‡é…ç½®
factor_weights:
  # åŠ¨é‡ç±»å› å­ï¼ˆé€‰æ‹©4-5ä¸ªä»£è¡¨æ€§å› å­ï¼‰
  momentum:
    MOMENTUM_63D: 0.07
    MOM_ACCEL: 0.06
    RELATIVE_STRENGTH_20D: 0.07
    TREND_CONSISTENCY: 0.06

  # æŠ€æœ¯æŒ‡æ ‡ç±»å› å­
  technical:
    RSI_14: 0.08
    WR_14: 0.07
    # å¯è€ƒè™‘åç»­æ·»åŠ MACD

  # æ³¢åŠ¨ç‡ç±»å› å­ï¼ˆé€‰æ‹©2-3ä¸ªï¼‰
  volatility:
    VOLATILITY_120D: 0.07
    ATR_14: 0.06
    VOLATILITY_REGIME_SHIFT: 0.05

  # ä»·æ ¼ä½ç½®ç±»å› å­ï¼ˆé€‰æ‹©2-3ä¸ªï¼‰
  price_position:
    PRICE_POSITION_60D: 0.07
    DISTANCE_TO_52W_HIGH: 0.06
    INTRADAY_POSITION: 0.05

  # é‡ä»·å…³ç³»ç±»å› å­ï¼ˆé€‰æ‹©2ä¸ªï¼‰
  volume_price:
    VOLUME_RATIO_20D: 0.06
    VOLUME_PRICE_TREND: 0.06

  # æ¨ªæˆªé¢å› å­ï¼ˆä¿ç•™æ‰€æœ‰ï¼Œè¿™æ˜¯æ‚¨çš„ä¼˜åŠ¿ï¼‰
  cross_section:
    CS_RANK_PERCENTILE: 0.08
    CS_RANK_CHANGE_5D: 0.07
    ROTATION_SCORE: 0.07
    VOL_ADJUSTED_EXCESS: 0.06
    RS_DEVIATION: 0.06

  # é£é™©å› å­ï¼ˆé€‰æ‹©1-2ä¸ªï¼‰
  risk:
    DRAWDOWN_126D: 0.05
    EXTREME_RETURN_FREQ: 0.04

# å› å­å»é‡é…ç½®
factor_deduplication:
  enabled: true
  correlation_threshold: 0.8
  priority_factors:
    - "RSI_14"  # ä¼˜å…ˆä¿ç•™RSI
    - "CS_RANK_PERCENTILE"  # ä¼˜å…ˆä¿ç•™æ¨ªæˆªé¢æ’å
    - "ROTATION_SCORE"  # ä¼˜å…ˆä¿ç•™è½®åŠ¨åˆ†æ•°
    - "MOMENTUM_63D"  # ä¼˜å…ˆä¿ç•™ä¸­æœŸåŠ¨é‡
    - "VOLATILITY_120D"  # ä¼˜å…ˆä¿ç•™é•¿æœŸæ³¢åŠ¨ç‡

  # å†—ä½™å› å­ç»„ï¼ˆæ¯ç»„åªä¿ç•™æœ€ä¼˜çš„1ä¸ªï¼‰
  redundant_groups:
    relative_momentum_group:
      - "RELATIVE_MOMENTUM_20D"
      - "RELATIVE_MOMENTUM_60D"
      - "RELATIVE_MOMENTUM_20D_ZSCORE"
      - "RELATIVE_MOMENTUM_60D_ZSCORE"
      keep: "RELATIVE_MOMENTUM_20D"  # ä¿ç•™20æ—¥ç›¸å¯¹åŠ¨é‡

    zscore_group:
      - "CS_RANK_CHANGE_5D_ZSCORE"
      - "VOL_ADJUSTED_EXCESS_ZSCORE"
      - "RS_DEVIATION_ZSCORE"
      keep: "CS_RANK_CHANGE_5D_ZSCORE"  # ä¿ç•™æ¨ªæˆªé¢æ’åå˜åŒ–