# =============================================================================
# 排序模型训练数据源配置
# =============================================================================
# 
# 本文件定义了用于训练ML排序模型的多个数据源
# 每个数据源对应一次WFO实验 + 相应的真实回测结果
# 
# 使用方式:
#   python run_ranking_pipeline.py --config configs/ranking_datasets.yaml
#
# 更新说明:
#   1. 每次运行新的换仓周期WFO实验后,在datasets列表中添加一项
#   2. rebalance_days会作为元数据列加入训练集,用于标记数据来源
#   3. 取消注释(删除行首的#)即可启用新数据源
#   4. 建议按换仓周期从小到大排序,便于管理
# =============================================================================

# -----------------------------------------------------------------------------
# 目标列配置
# -----------------------------------------------------------------------------
target_col: "annual_ret_net"      # 主目标: 年化净收益率
secondary_target: "sharpe_net"    # 次要目标: Sharpe比率(用于验证)

# -----------------------------------------------------------------------------
# 数据源列表
# -----------------------------------------------------------------------------
datasets:
  # ---------------------------------------------------------------------------
  # 数据源1: 8天换仓周期 (基准实验)
  # ---------------------------------------------------------------------------
  - wfo_dir: "results/run_20251114_155420"
    real_dir: "results_combo_wfo/20251114_155420_20251114_161032"
    rebalance_days: 8
    weight: 1.0
    label: "8天换仓基准实验"
  
  # ---------------------------------------------------------------------------
  # 数据源2: 1天换仓周期 (高频实验 - 示例,待实际运行后启用)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_1d"
  #   real_dir: "results_combo_wfo/xxx_1d"
  #   rebalance_days: 1
  #   weight: 1.0
  #   label: "1天高频换仓实验"
  
  # ---------------------------------------------------------------------------
  # 数据源3: 2天换仓周期 (示例)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_2d"
  #   real_dir: "results_combo_wfo/xxx_2d"
  #   rebalance_days: 2
  #   weight: 1.0
  #   label: "2天换仓实验"
  
  # ---------------------------------------------------------------------------
  # 数据源4: 3天换仓周期 (示例)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_3d"
  #   real_dir: "results_combo_wfo/xxx_3d"
  #   rebalance_days: 3
  #   weight: 1.0
  #   label: "3天换仓实验"
  
  # ---------------------------------------------------------------------------
  # 数据源5: 4天换仓周期 (示例)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_4d"
  #   real_dir: "results_combo_wfo/xxx_4d"
  #   rebalance_days: 4
  #   weight: 1.0
  #   label: "4天换仓实验"
  
  # ---------------------------------------------------------------------------
  # 数据源6: 5天换仓周期 (示例)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_5d"
  #   real_dir: "results_combo_wfo/xxx_5d"
  #   rebalance_days: 5
  #   weight: 1.0
  #   label: "5天换仓实验"
  
  # ---------------------------------------------------------------------------
  # 数据源7: 10天换仓周期 (示例)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_10d"
  #   real_dir: "results_combo_wfo/xxx_10d"
  #   rebalance_days: 10
  #   weight: 1.0
  #   label: "10天换仓实验"
  
  # ---------------------------------------------------------------------------
  # 数据源8: 20天换仓周期 (低频实验 - 示例)
  # ---------------------------------------------------------------------------
  # - wfo_dir: "results/run_xxx_20d"
  #   real_dir: "results_combo_wfo/xxx_20d"
  #   rebalance_days: 20
  #   weight: 1.0
  #   label: "20天低频换仓实验"

# -----------------------------------------------------------------------------
# 元数据(可选)
# -----------------------------------------------------------------------------
metadata:
  description: "ETF轮动策略排序模型训练数据集"
  created_by: "ML Ranker Pipeline"
  version: "v1.0"
  notes: |
    - 当前仅使用8天换仓周期作为基准
    - 后续会逐步添加1-20天的其他换仓周期数据
    - 多周期数据有助于模型学习不同时间尺度的策略特征

# =============================================================================
# 使用示例
# =============================================================================
# 
# 1. 基础训练(仅8天数据):
#    python run_ranking_pipeline.py --config configs/ranking_datasets.yaml
# 
# 2. 添加新数据源后重训:
#    - 运行新换仓周期的WFO: python run_combo_wfo.py --rebalance-freq 5
#    - 运行真实回测: python real_backtest/run_profit_backtest.py ...
#    - 在本文件中取消注释相应的数据源配置
#    - 重新运行: python run_ranking_pipeline.py --config configs/ranking_datasets.yaml
# 
# 3. 快速训练(跳过稳健性评估):
#    python run_ranking_pipeline.py --config configs/ranking_datasets.yaml --no-robustness
# 
# 4. 自定义模型参数:
#    python run_ranking_pipeline.py \
#      --config configs/ranking_datasets.yaml \
#      --n-estimators 1000 \
#      --learning-rate 0.03
# 
# =============================================================================
