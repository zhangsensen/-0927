# =============================================================================
# ML排序模式快速测试配置 (历史测试用, 已废弃)
# =============================================================================
# 
# ⚠️ 注意: 此文件仅用于历史 ML 排序功能测试
# 
# 生产环境请使用: configs/combo_wfo_config.yaml (已默认启用 ML 排序)
# 
# 本文件保留仅供参考, 实际运行请使用主配置文件
# 
# =============================================================================

# 基于 combo_wfo_config.yaml, 仅修改 ranking 部分和缩小数据范围

ranking:
  method: "ml"    # 使用 ML 排序
  top_n: 100      # 最终选择100个组合
  ml_model_path: "ml_ranker/models/ltr_ranker"

backtest:
  commission_rate: 0.000005
  initial_capital: 1000000
  lookback_window: 252
  rebalance_frequency: 21d
  max_workers: 8
  test_all_frequencies: false
  test_all_position_sizes: false
  position_size_range: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

combo_wfo:
  combo_sizes:
  - 2
  - 3
  enable_fdr: true
  fdr_alpha: 0.05
  fdr_method: fdr_bh
  is_period: 252
  n_jobs: -1
  oos_period: 60
  rebalance_frequencies:
  - 8
  save_all_results: true
  scoring:
    complexity_penalty_lambda: 0.15
    use_robust_scoring: true
  scoring_strategy: ic
  step_size: 60
  top_n: 1000  # WFO内部先筛选1000个
  verbose: true

cross_section:
  bounded_factors:
  - PRICE_POSITION_20D
  - PRICE_POSITION_120D
  - PV_CORR_20D
  - RSI_14
  winsorize_lower: 0.025
  winsorize_upper: 0.975

data:
  cache_dir: null
  data_dir: null
  end_date: '2024-12-31'  # 缩短测试时间
  start_date: '2023-01-01'
  symbols:
  - '159801'
  - '159819'
  - '159859'
  - '159883'
  - '159915'
  - '159920'
  - '159928'
  - '159949'
  - '159992'
  - '159995'

factors:
  factor_groups:
  - technical
  selection:
    ic_threshold: 0.02
    p_value_threshold: 0.05
