<!-- ALLOW-MD -->
# ETF轮动优化系统 - 项目背景说明

> **目标读者**: 新开发者、代码审查者、合作投资者
> **阅读时间**: 3-5分钟
> **更新时间**: 2025-11-09

## 🎯 项目定位

**面向个人投资者的ETF轮动量化交易系统**

专注于**低频、低成本、高胜率**的ETF轮动策略，基于严格的统计学方法和Walk Forward Optimization框架，为100万资金规模的个人投资者提供**生产就绪**的量化交易解决方案。

---

## 💰 核心背景

### 投资者画像
- **资金规模**: 100万人民币 (个人投资者)
- **风险偏好**: 稳健型，可接受最大回撤-25%
- **投资期限**: 3-5年中长期投资
- **交易能力**: 基础ETF交易，无需高频操作
- **技术能力**: 具备基础Python和量化知识

### 市场选择
- **交易品种**: 国内主流ETF (43只)
- **交易频率**: 日线数据 (适合个人监控)
- **交易成本**: ETF万0.5佣金 (极低成本)
- **流动性**: 主流ETF，日成交额充足

---

## 🏗️ 系统设计原则

### 1. **个人投资者优先**
```yaml
设计约束:
  - 调仓频率: 8天 (个人可执行)
  - 持仓数量: 4-5只 (可分散管理)
  - 交易成本: <0.5%年化 (ETF优势)
  - 监控需求: 周检级别 (不过度复杂)
```

### 2. **成本敏感性**
- **ETF选择**: 主流低费率ETF，避免复杂衍生品
- **低频交易**: 避免频繁调仓的佣金侵蚀
- **分散投资**: 4-5只ETF等权重，降低单一风险
- **税收考虑**: ETF分红和资本利得税务优化

### 3. **操作可行性**
- **数据获取**: 使用公开的日线OHLCV数据
- **执行难度**: 8天调仓，人工可执行
- **监控成本**: 系统化监控，人工周检
- **技术门槛**: 基于Python，个人可维护

---

## 📊 核心策略逻辑

### 因子驱动
```python
# 18个精选因子，覆盖6大类
动量因子: MOM_20D, RELATIVE_STRENGTH_VS_MARKET_20D
波动因子: RET_VOL_20D, VOL_RATIO_20D
趋势因子: SLOPE_20D, PRICE_POSITION_20D
技术因子: RSI_14, ADX_14D, VORTEX_14D
质量因子: SHARPE_RATIO_20D, CALMAR_RATIO_60D
资金流: CMF_20D, OBV_SLOPE_10D
```

### 组合优化
- **组合规模**: 2-5个因子协同组合
- **权重计算**: 基于历史IC的绝对值加权
- **频率选择**: 多频率投票机制，8天最优
- **风险控制**: FDR显著性检验，避免假阳性

### 排序校准
- **传统排序**: WFO的mean_oos_ic排序 (相关性≈0.07)
- **GBDT校准**: 学习WFO特征→真实Sharpe映射 (相关性≈0.915)
- **生产使用**: 直接按calibrated_sharpe_pred排序
- **持续监控**: Pearson<0.80触发再训练

---

## 🎯 性能目标与约束

### 收益目标
```yaml
历史表现:
  年化收益: 18.8% (Top2000均值)
  Sharpe比率: 0.95 (风险调整后优秀)
  最大回撤: -20% (个人可承受)
  胜率: 63% (正收益占比)
```

### 风险约束
```yaml
风险控制:
  单一持仓: ≤25% (分散风险)
  最大回撤: ≤-25% (个人承受度)
  交易成本: ≤0.5%年化 (ETF优势)
  集中度: HHI<0.01 (避免风格集中)
```

### 操作约束
```yaml
执行约束:
  调仓频率: 8天 (平衡收益与成本)
  持仓数量: 4-5只 (管理效率)
  数据延迟: T+1执行 (合规要求)
  资金使用率: 95-100% (资金效率)
```

---

## 🔧 技术架构选择

### 数据处理
- **数据源**: 公开OHLCV日线数据
- **存储格式**: Parquet (高效压缩)
- **计算框架**: NumPy + Pandas + Numba JIT
- **并行计算**: joblib多进程 (8核优化)

### 算法核心
- **WFO框架**: 滑动窗口训练验证 (避免过拟合)
- **IC计算**: Spearman相关系数 (统计严谨)
- **因子标准化**: 横截面Z-score + Winsorize
- **组合评估**: 多指标综合评分 (IC/IR/胜率/稳定性)

### 工程优化
- **性能**: 37.8倍加速 (IC预计算+memmap+JIT)
- **内存**: 智能缓存 + FP32存储
- **监控**: 自动化性能和风险监控
- **部署**: 纯本地化，个人可维护

---

## 📈 项目边界与限制

### ✅ **项目范围内**
- ETF轮动策略研发与回测
- 因子库维护与优化
- WFO模型训练与验证
- 风险控制与监控系统
- 100万资金规模优化

### ❌ **项目范围外**
- 高频交易策略 (<1天)
- 股票、期货、期权等其他资产
- 杠杆、融资、融券交易
- 复杂衍生品策略
- 机构级合规内控要求

### 🚫 **明确限制**
- 不提供投资建议，仅技术实现
- 不保证未来收益，历史表现仅供参考
- 不处理极端市场情况(金融危机、政策突变)
- 不支持实时交易接口集成

---

## 🎯 成功标准

### 技术指标
- **排序准确性**: Pearson≥0.80, Spearman≥0.70
- **运行效率**: WFO<10分钟，回测<30分钟
- **系统稳定性**: 连续运行无故障
- **代码质量**: 可维护、可扩展

### 业务指标
- **风险收益**: Sharpe>0.8, 回撤<-25%
- **成本控制**: 总成本率<0.5%
- **操作可行性**: 个人可独立执行
- **监控有效性**: 异常检测及时准确

### 维护指标
- **更新频率**: 数据日更，模型季度评估
- **监控成本**: 周检1小时，月检4小时
- **技术债务**: 保持<5%开发时间占比
- **文档完善**: 关键决策有迹可循

---

## 🔄 发展路线图

### Phase 1: 基础完善 ✅
- WFO系统实现
- 因子库构建 (18个因子)
- 基础回测验证
- 性能优化 (37.8倍加速)

### Phase 2: 排序校准 ✅
- GBDT校准模型训练
- 相关性提升 (0.07→0.915)
- TopK候选池建立
- 监控体系搭建

### Phase 3: 风险控制 🚧
- 风险监控模块开发
- 集中度风险控制
- 动态止损机制
- 压力测试框架

### Phase 4: 策略拓展 📋
- 多策略组合构建
- 风格轮动增强
- 市场状态感知
- 长期稳健优化

---

## 📚 关键参考文档

1. **[PROJECT_OVERVIEW.md](PROJECT_OVERVIEW.md)** - 技术架构总览
2. **[OUTPUT_SCHEMA.md](OUTPUT_SCHEMA.md)** - 数据契约规范
3. **[LLM_GUARDRAILS.md](LLM_GUARDRAILS.md)** - 开发约束
4. **[WFO_CALIBRATION_REPORT.md](WFO_CALIBRATION_REPORT.md)** - 校准技术报告
5. **[8D_WFO_PIPELINE_MANUAL.md](8D_WFO_PIPELINE_MANUAL.md)** - 运行手册

---

## ⚠️ 重要提醒

### 使用须知
- 本系统仅供技术学习与研究使用
- 不构成任何投资建议或承诺
- 投资有风险，决策需谨慎
- 建议在充分理解系统逻辑后再使用

### 开发准则
- 严格遵循项目边界，避免功能蔓延
- 优先考虑个人投资者的操作可行性
- 保持统计严谨性，避免过拟合
- 持续监控风险，及时调整策略

---

## 📞 联系方式

如有技术问题或合作意向，请通过以下方式联系：

- **GitHub Issues**: 项目问题跟踪
- **技术文档**: `/docs/` 目录详细文档
- **配置说明**: `/configs/` 目录参数说明

---

*最后更新: 2025-11-09*
*文档版本: v1.0*