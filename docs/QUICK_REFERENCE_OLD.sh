#!/bin/bash
# 📋 项目快速参考 - 2025-11-16

cat << 'EOF'

╔════════════════════════════════════════════════════════════════════════════════╗
║                    🎯 ETF轮动系统 | 快速参考卡片                               ║
║                          最后更新: 2025-11-16                                 ║
╚════════════════════════════════════════════════════════════════════════════════╝

┌─ 📊 核心结果 ────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  ML排序 vs WFO原始排序 (Top 2,000组合, 5bps滑点)                             │
│                                                                                 │
│  指标                    │  ML排序   │  WFO原始  │  改善      │  幅度         │
│  ─────────────────────────┼─────────┼─────────┼──────────┼──────────        │
│  年化收益(税后)           │  16.70% │  9.88%  │ +6.83%   │ +69.1% ⭐⭐⭐   │
│  Sharpe比率(税后)         │  0.824  │  0.471  │ +0.352   │ +74.7% ⭐⭐⭐   │
│  最大回撤(税后)           │ -21.74% │ -31.30% │ +9.55%   │ -30.5% ⭐⭐⭐   │
│  Sharpe>0.8的组合数       │ 1,399   │  101    │ +1,298   │ +1186% ⭐⭐⭐   │
│  正收益占比               │ 100.0%  │ 98.4%   │ +1.6%    │     -           │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ 🧠 三大优势机制 ─────────────────────────────────────────────────────────────┐
│                                                                                 │
│  1️⃣  多维特征学习 (44维 vs 1维)                                              │
│     └─ WFO: 只看mean_oos_ic → 容易选中高IC但高风险的组合                    │
│     └─ ML:  自动学习44维特征的权重 → 发现真实收益驱动因素                   │
│                                                                                 │
│  2️⃣  风险调整偏向 (Sharpe vs IC)                                             │
│     └─ WFO: "IC最高就是最好" → 忽视风险                                      │
│     └─ ML:  "最大化Sharpe" → 自动平衡收益和风险                             │
│                                                                                 │
│  3️⃣  过拟合防控 (学习映射 vs 相关性)                                         │
│     └─ WFO: OOS IC可能是随机波动                                              │
│     └─ ML:  学习"特征→实际收益"的因果映射 → 防止幸存者偏差                   │
│                                                                                 │
│  💡 具体例子: Top-1组合选择                                                  │
│     ├─ WFO选: 3因子(ADX + CORR + VOLR) OOS_IC=0.0489 (高但风险大)           │
│     └─ ML选:  5因子(ADX + CMF + CORR + RETVOL + RSI) OOS_IC稍低但Sharpe更优   │
│     → ML学到了"多样性稳定IC，单点高IC波动大"                                │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ 📁 数据位置速查 ─────────────────────────────────────────────────────────────┐
│                                                                                 │
│  WFO阶段输出:                                                                 │
│    results/run_20251116_151853/        ← ML排序WFO输出                       │
│    results/run_20251116_152238/        ← WFO排序WFO输出                      │
│                                                                                 │
│  回测输出:                                                                     │
│    results_combo_wfo/20251116_151853_20251116_151901/  ← ML排序回测            │
│    results_combo_wfo/20251116_152238_20251116_152245/  ← WFO排序回测           │
│                                                                                 │
│  分析报告:                                                                     │
│    PROJECT_LATEST_STATUS_20251116.md      ⭐⭐⭐ 后续大模型必读(629行)       │
│    DOCUMENT_NAVIGATION_20251116.md        导航和快速查询(415行)               │
│    EXECUTION_RESULT_20251116.md           ML运行详情(268行)                   │
│    COMPARISON_ANALYSIS_20251116.md        对比分析(307行)                      │
│    FINAL_SUMMARY_20251116.txt             执行摘要(224行)                      │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ 🚀 立即行动 ─────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  ✅ 系统已验证生产可用                                                         │
│                                                                                 │
│  建议步骤:                                                                     │
│   1. 审核 FINAL_SUMMARY_20251116.txt                                           │
│   2. 备份本次执行结果 (WFO输出 + 回测CSV)                                     │
│   3. 小额实盘验证 (建议Top-500, 5bps滑点真实测试)                            │
│   4. 监控运行(月度更新)                                                       │
│   5. 季度ML模型重训                                                           │
│                                                                                 │
│  所有质量检查: ✅ PASSED                                                      │
│   ✓ 数据完整性 (43 ETF × 1,399天无缺口)                                      │
│   ✓ 向量化率 (100%, 无Python循环)                                           │
│   ✓ 无前视偏差 (OOS严格隔离)                                                │
│   ✓ 成本模型 (5bps滑点 + 0.05%手续费)                                        │
│   ✓ 可复现性 (两次运行完全一致)                                              │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ 📚 文档导航 ─────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  按角色选择:                                                                   │
│    👤 项目经理         → PROJECT_LATEST_STATUS | 第1-3部分 (5分钟)           │
│    👨‍💻 量化工程师       → PROJECT_LATEST_STATUS (完整) + COMPARISON_ANALYSIS    │
│    🔧 运维管理员       → PROJECT_LATEST_STATUS | 数据位置 + 下一步行动      │
│    🤖 大模型/后续开发   → PROJECT_LATEST_STATUS (完整, 必读!)                │
│                                                                                 │
│  按内容查询:                                                                   │
│    - "系统性能?" → PROJECT_LATEST_STATUS | 📊 核心数据                      │
│    - "为什么ML优?" → PROJECT_LATEST_STATUS | 🧠 三大机制                    │
│    - "数据在哪?" → PROJECT_LATEST_STATUS | 💾 数据物理位置                   │
│    - "怎么部署?" → PROJECT_LATEST_STATUS | 🎯 实战建议                      │
│    - "重叠多少?" → COMPARISON_ANALYSIS | 组合选择分析                        │
│    - "过拟合?" → PROJECT_LATEST_STATUS | ✅ 质量保证检查表                   │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ ⚡ 运行命令速查 ───────────────────────────────────────────────────────────────┐
│                                                                                 │
│  # 完整WFO + 回测 (ML排序)                                                    │
│  cd /home/sensen/dev/projects/-0927/etf_rotation_experiments                   │
│  python3 applications/run_combo_wfo.py --config configs/combo_wfo_config.yaml │
│                                                                                 │
│  # 完整WFO + 回测 (WFO原始排序)                                               │
│  python3 applications/run_combo_wfo.py \                                       │
│    --config configs/combo_wfo_config_no_ml.yaml                              │
│                                                                                 │
│  # 仅回测 (对指定combo_ranking_file)                                          │
│  cd /home/sensen/dev/projects/-0927                                            │
│  python3 real_backtest/run_profit_backtest.py --all --slippage-bps 5          │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ 🔬 关键数字 ─────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  数据范围       │ 2020-01-02 ~ 2025-10-14 (1,399交易日)                      │
│  ETF数量        │ 43只                                                        │
│  因子库         │ 18个精选因子                                                │
│  组合总数       │ 12,597个                                                    │
│  WFO窗口        │ 19个 (IS 252d, OOS 60d, Step 60d)                           │
│  特征维度       │ 44维                                                        │
│  Top-N池        │ 2,000个组合                                                │
│  Top-50重叠     │ 14% (仅7个共同)                                            │
│  高质量比例     │ 70% (Sharpe>0.8)                                           │
│  执行耗时       │ ~130秒 (两次完整运行)                                       │
│  向量化率       │ 100% (无循环)                                              │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─ ⚠️  风险提示 ───────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  • 历史回测≠未来表现 (市场常数改变)                                            │
│  • 定期监控收益衰减 (建议月度检查)                                             │
│  • 流动性风险 (2000组合等权重需关注)                                           │
│  • 政策风险 (中国市场监管变化)                                                 │
│  • ML模型定期重训 (建议季度更新)                                               │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

📞 快速问答:

Q: 系统何时可部署?  
A: 现在即可。已过所有质量检查。建议先用Top-500小额验证。

Q: 需要多久才能看到效果?  
A: 平均持仓周期~8天(再平衡频率)。建议至少运行2个月以验证。

Q: 如何监控实盘表现?  
A: 对标:ML排序年化16.70% → 如果实际<12%, 检查滑点/手续费/流动性问题。

Q: 何时应该修改参数?  
A: 连续3个月Sharpe<0.6时 → 重训ML模型或调整Top-N池大小。

Q: 可否扩展到港股/A股?  
A: 可以。需要重新计算因子库和回测成本模型(两个市场费率不同)。

═════════════════════════════════════════════════════════════════════════════════

🎓 Linus 工程哲学: No bullshit. No magic. Just math and code.

生成时间: 2025-11-16 18:56  
下一步: 选择你需要的角色，按推荐顺序阅读文档即可。  
如有问题: 参考 PROJECT_LATEST_STATUS_20251116.md

═════════════════════════════════════════════════════════════════════════════════

EOF
