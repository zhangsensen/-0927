# ðŸŒ¤ï¸ å…¨å¤©å€™é›ªçƒç­–ç•¥ | All-Weather Snowball Strategy

> **ç‰ˆæœ¬**: v1.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-11-28  
> **ç›®æ ‡èµ„é‡‘**: 100ä¸‡äººæ°‘å¸  
> **å›žæµ‹å‘¨æœŸ**: 2020-01-01 ~ 2025-10-14

---

## ðŸ“Š ç­–ç•¥æ¦‚è§ˆ

### æ ¸å¿ƒæ€æƒ³
å…¨å¤©å€™ç­–ç•¥ï¼ˆAll-Weather Strategyï¼‰æ˜¯ä¸€ç§èµ„äº§é…ç½®æ–¹æ³•ï¼Œæ—¨åœ¨é€šè¿‡**å¤šå…ƒåŒ–**å’Œ**åŠ¨æ€æƒé‡è°ƒæ•´**ï¼Œåœ¨ä¸åŒå¸‚åœºçŽ¯å¢ƒä¸‹éƒ½èƒ½èŽ·å¾—ç¨³å¥æ”¶ç›Šã€‚

æœ¬å®žçŽ°åŸºäºŽä»¥ä¸‹æ ¸å¿ƒåŽŸåˆ™ï¼š
1. **åˆ†æ± é€‰è‚¡**ï¼š7ä¸ªå­æ± ç‹¬ç«‹è¿è¡Œå› å­é€‰è‚¡
2. **åˆ†ç±»å› å­**ï¼šä¸åŒèµ„äº§ç±»åˆ«ä½¿ç”¨ä¸“å±žå› å­
3. **æ³¢åŠ¨çŽ‡ä½“åˆ¶åˆ‡æ¢**ï¼šæ ¹æ®å¸‚åœºæ³¢åŠ¨çŽ‡åŠ¨æ€è°ƒæ•´å„æ± æƒé‡
4. **é¿é™©èµ„äº§éš”ç¦»**ï¼šé¿é™©èµ„äº§ï¼ˆé»„é‡‘ã€å€ºåˆ¸ï¼‰ä¸å‚ä¸Žæƒç›Šå› å­é€‰è‚¡ï¼Œé¿å…åŒé‡è®¡ç®—

### å›žæµ‹ç»“æžœæ‘˜è¦ (åŸºäºŽåˆ†ç±»å› å­ v1.1)

| æŒ‡æ ‡ | æœ‰ä½“åˆ¶åˆ‡æ¢ | æ— ä½“åˆ¶åˆ‡æ¢ | å¤‡æ³¨ |
|------|-----------|-----------|------|
| **æ€»æ”¶ç›Š** | 38.2% | 39.8% | ç¨³å¥ä½†éžæš´åˆ© |
| **æœ€å¤§å›žæ’¤** | 16.3% | 16.5% | æžä½³çš„é£Žé™©æŽ§åˆ¶ |
| **å¤æ™®æ¯”çŽ‡** | 0.60 | 0.61 | é£Žé™©è°ƒæ•´åŽæ”¶ç›Šå¹³ç¨³ |
| **èƒœçŽ‡** | 44.6% | 44.4% | å…¸åž‹è¶‹åŠ¿ç­–ç•¥ç‰¹å¾ |
| **äº¤æ˜“æ¬¡æ•°** | 733 | 738 | å¹³å‡æ¯3å¤©ä¸€ç¬”äº¤æ˜“ |

> **æ³¨æ„**: ç›¸æ¯”çº¯å¤šå¤´ç­–ç•¥ï¼ˆå¦‚Rank 3çš„168%ï¼‰ï¼Œå…¨å¤©å€™ç­–ç•¥ç‰ºç‰²äº†éƒ¨åˆ†æ”¶ç›Šä»¥æ¢å–æžä½Žçš„æ³¢åŠ¨ï¼ˆå›žæ’¤ä»…16%ï¼‰ã€‚è¿™ç¬¦åˆ"ä¿æœ¬æ»šé›ªçƒ"çš„é•¿æœŸç›®æ ‡ã€‚

---

## ðŸ—ï¸ æž¶æž„è®¾è®¡

### 1. ä¸ƒæŸ±å­æ± æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å…¨å¤©å€™ç­–ç•¥ç»„åˆ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æƒç›Šç±» (50%)                  â”‚  é¿é™©/å¤šå…ƒåŒ– (50%)           â”‚
â”‚  â”œâ”€â”€ EQUITY_BROAD   (20%)     â”‚  â”œâ”€â”€ BOND        (20%)      â”‚
â”‚  â”œâ”€â”€ EQUITY_GROWTH  (15%)     â”‚  â”œâ”€â”€ COMMODITY   (15%)      â”‚
â”‚  â”œâ”€â”€ EQUITY_CYCLICAL(10%)     â”‚  â””â”€â”€ QDII        (15%)      â”‚
â”‚  â””â”€â”€ EQUITY_DEFENSIVE(5%)     â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å­æ± è¯¦æƒ…

| æ± åç§° | èµ„äº§æ•° | æŒä»“æ•° | ç›®æ ‡æƒé‡ | ä»£è¡¨ETF |
|--------|--------|--------|----------|---------|
| **EQUITY_BROAD** | 7 | 3 | 20% | 510300, 510500, 159915 |
| **EQUITY_GROWTH** | 17 | 3 | 15% | 512480, 515790, 159995 |
| **EQUITY_CYCLICAL** | 6 | 3 | 10% | 512880, 512800, 512660 |
| **EQUITY_DEFENSIVE** | 3 | 3 | 5% | 512690, 159928, 512980 |
| **BOND** | 3 | 2 | 20% | 511010, 511260, 511380 |
| **COMMODITY** | 2 | 2 | 15% | 518880, 518850 |
| **QDII** | 5 | 3 | 15% | 513100, 513500, 159920 |

---

## ðŸ§  å› å­ç³»ç»Ÿ

### 1. é€šç”¨å› å­ï¼ˆæƒç›Šç±»ï¼‰

åŸºäºŽ `PreciseFactorLibrary v2` çš„ 18 ä¸ªå› å­ï¼š

| ç»´åº¦ | å› å­ | æè¿° |
|------|------|------|
| è¶‹åŠ¿/åŠ¨é‡ | MOM_20D, SLOPE_20D | 20æ—¥åŠ¨é‡/æ–œçŽ‡ |
| ä»·æ ¼ä½ç½® | PRICE_POSITION_20D/120D | ä»·æ ¼ç›¸å¯¹é«˜ä½Žç‚¹ä½ç½® |
| æ³¢åŠ¨/é£Žé™© | RET_VOL_20D, MAX_DD_60D | æ³¢åŠ¨çŽ‡å’Œå›žæ’¤ |
| æˆäº¤é‡ | VOL_RATIO_20D/60D | é‡èƒ½æ¯”çŽ‡ |
| ä»·é‡è€¦åˆ | PV_CORR_20D | ä»·é‡ç›¸å…³æ€§ |
| åè½¬ | RSI_14 | ç›¸å¯¹å¼ºåº¦æŒ‡æ•° |
| èµ„é‡‘æµ | OBV_SLOPE_10D, CMF_20D | OBVæ–œçŽ‡å’Œèµ„é‡‘æµ |
| é£Žé™©è°ƒæ•´ | SHARPE_RATIO_20D, CALMAR_RATIO_60D | å¤æ™®/å¡çŽ›æ¯”çŽ‡ |
| è¶‹åŠ¿å¼ºåº¦ | ADX_14D, VORTEX_14D | ADXå’Œèžºæ—‹æŒ‡æ ‡ |
| ç›¸å¯¹å¼ºåº¦ | RELATIVE_STRENGTH_VS_MARKET_20D | ç›¸å¯¹å¸‚åœºå¼ºåº¦ |

### 2. åˆ†ç±»å› å­ï¼ˆæ–°å¢žï¼‰

#### å€ºåˆ¸å› å­ (`BondFactors`)
| å› å­ | æè¿° | æ–¹å‘ |
|------|------|------|
| YIELD_MOMENTUM_20D | æ”¶ç›ŠçŽ‡åŠ¨é‡ | high_is_good |
| DURATION_PROXY_60D | ä¹…æœŸä»£ç† | low_is_good |
| BOND_VOL_REGIME | æ³¢åŠ¨çŽ‡ä½“åˆ¶ | low_is_good |
| BOND_MOMENTUM_SCORE | ç»¼åˆåŠ¨é‡è¯„åˆ† | high_is_good |

#### å•†å“å› å­ (`CommodityFactors`)
| å› å­ | æè¿° | æ–¹å‘ |
|------|------|------|
| USD_INVERSE_MOM_20D | ç¾Žå…ƒé€†ç›¸å…³åŠ¨é‡ | high_is_good |
| COMMODITY_TREND_20D | å•†å“è¶‹åŠ¿å¼ºåº¦ | high_is_good |
| GOLD_SAFE_HAVEN_SCORE | é¿é™©æƒ…ç»ªè¯„åˆ† | high_is_good |
| COMMODITY_VOL_ADJ_MOM | æ³¢åŠ¨çŽ‡è°ƒæ•´åŠ¨é‡ | high_is_good |

#### QDIIå› å­ (`QDIIFactors`)
| å› å­ | æè¿° | æ–¹å‘ |
|------|------|------|
| QDII_MOMENTUM_20D | 20æ—¥åŠ¨é‡ | high_is_good |
| FX_ADJUSTED_MOM | æ±‡çŽ‡è°ƒæ•´åŠ¨é‡ | high_is_good |
| QDII_VOL_RATIO | æ³¢åŠ¨çŽ‡æ¯”çŽ‡ | low_is_good |
| OVERNIGHT_GAP_SCORE | éš”å¤œè·³ç©ºè¯„åˆ† | neutral |

---

## ðŸ”„ æ³¢åŠ¨çŽ‡ä½“åˆ¶åˆ‡æ¢

### 1. ä½“åˆ¶è¯†åˆ«

```python
vol_ratio = vol_short (20D) / vol_long (252D)

if vol_ratio > 1.5:    regime = HIGH_VOL (Risk-Off)
elif vol_ratio < 0.7:  regime = LOW_VOL (Risk-On)
else:                  regime = NORMAL
```

### 2. æƒé‡è°ƒæ•´è§„åˆ™

| ä½“åˆ¶ | æƒç›Šè°ƒæ•´ | é¿é™©è°ƒæ•´ |
|------|----------|----------|
| **HIGH_VOL** | -30% | +15% (BOND), +15% (COMMODITY) |
| **NORMAL** | ä¸å˜ | ä¸å˜ |
| **LOW_VOL** | +12% (GROWTH, CYCLICAL) | -20% |

---

## ðŸ“ æ–‡ä»¶ç»“æž„

```
etf_rotation_optimized/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ precise_factor_library_v2.py  # 18ä¸ªé€šç”¨å› å­
â”‚   â””â”€â”€ category_factors.py           # åˆ†ç±»å› å­ï¼ˆæ–°å¢žï¼‰

scripts/
â”œâ”€â”€ run_allweather_vec.py             # å…¨å¤©å€™ç­–ç•¥ä¸»å¼•æ“Ž
â””â”€â”€ develop_vec_roro.py               # ROROç­–ç•¥ï¼ˆå·²ä¿®å¤åŒé‡è®¡ç®—ï¼‰

configs/
â””â”€â”€ etf_pools.yaml                    # 7æ± é…ç½®æ–‡ä»¶
```

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œå…¨å¤©å€™ç­–ç•¥

```bash
cd /home/sensen/dev/projects/-0927
uv run python scripts/run_allweather_vec.py
```

### 2. è‡ªå®šä¹‰å› å­ç»„åˆ

ä¿®æ”¹ `run_allweather_vec.py` ä¸­çš„ `sample_combo`:

```python
sample_combo = ["MOM_20D", "RSI_14", "SHARPE_RATIO_20D"]  # å¯è‡ªå®šä¹‰
```

### 3. è°ƒæ•´æ± æƒé‡

ç¼–è¾‘ `configs/etf_pools.yaml`:

```yaml
capital_constraints:
  EQUITY_BROAD:
    target_capital: 0.25  # ä»Ž 20% è°ƒæ•´åˆ° 25%
```

---

## âš ï¸ é£Žé™©æç¤º

1. **åŽ†å²å›žæµ‹ä¸ä»£è¡¨æœªæ¥**ï¼š2020-2025å¹´åŒ…å«ç–«æƒ…å’Œç‰›ç†Šå‘¨æœŸï¼Œæœªæ¥å¯èƒ½ä¸åŒ
2. **é»„é‡‘ç‰›å¸‚æ•ˆåº”**ï¼š2020-2025å¹´é»„é‡‘ä¸Šæ¶¨166%ï¼ŒROROç­–ç•¥å—ç›ŠäºŽæ­¤
3. **ä½“åˆ¶åˆ‡æ¢æ»žåŽ**ï¼šæ³¢åŠ¨çŽ‡æŒ‡æ ‡æœ‰æ»žåŽæ€§ï¼Œæžç«¯è¡Œæƒ…ä¸‹å¯èƒ½ååº”ä¸åŠæ—¶
4. **äº¤æ˜“æˆæœ¬**ï¼šå›žæµ‹å‡è®¾0.02%æ‰‹ç»­è´¹ï¼Œå®žç›˜éœ€è€ƒè™‘æ»‘ç‚¹å’Œå†²å‡»æˆæœ¬

---

## ðŸ“ˆ åŽç»­ä¼˜åŒ–æ–¹å‘

1. **å› å­æ­£äº¤åŒ–**ï¼šå¯¹é«˜ç›¸å…³å› å­è¿›è¡ŒPCAé™ç»´
2. **åŠ¨æ€å› å­æƒé‡**ï¼šæ ¹æ®ICè¡°å‡è°ƒæ•´å› å­æƒé‡
3. **æ± é—´å†å¹³è¡¡**ï¼šå®šæœŸé‡æ–°è¯„ä¼°å„æ± æœ€ä¼˜å› å­ç»„åˆ
4. **å®žç›˜éªŒè¯**ï¼šåœ¨ `real_backtest` æ¨¡å—è¿›è¡Œå®Œæ•´BTéªŒè¯

---

## ðŸ“ž è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…ï¼š
- `docs/ARCHITECTURE.md` - ç³»ç»Ÿæž¶æž„
- `docs/VEC_BT_ALIGNMENT_HISTORY_AND_FIXES.md` - VEC/BTå¯¹é½åŽ†å²
- `AGENTS.md` - å¼€å‘æŒ‡å—

---

**âœ… å…¨å¤©å€™é›ªçƒç­–ç•¥ v1.0 äº¤ä»˜å®Œæˆ**
